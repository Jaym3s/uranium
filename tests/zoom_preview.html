<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title> Zoom Preview Unit Test</title>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<script src="../external-lib/xui-2.0.0.js"></script>
<script src="../uranium.js"></script>
<script src="../zoom_preview.js"></script>
<link rel="stylesheet" type='text/css' href='test.css' />
<link rel="stylesheet" type='text/css' href='zoom_preview.css' />
</head>

<body suite='ZoomPreview'>

<h1> Zoom Preview </h1>

<hr>

<h2> How To: </h2>
<div class='description'>
  <p>
  This is a widget to look at a large zoomed image with touch events
  (although I've simulated it with mouseevents). The idea is that
  given some thumbnails / image preview, you can insert a button that
  the user can touch/drag around to view the zoomed image. It seems in
  the wild we also need a modifier rule, which tells us how to
  generate the src of the big image so that its really giant.
  </p>
  <p>
  Note: We assume listeners on the thumbnails to update the main
  image are already in place. If this is not the case, we can make a
  skeleton image gallery widget.
  </p>

  <p>
    To setup zoom preview:
  </p>
    <ol>
      <li> Identify the zoom-container. This should contain the normal
      'hero' image that the thumbnails update. It should also contain
      the zoom-button and zoom-image elements.
        <ul>
          <li>Add the 'mw-zoom-preview' attribute to the zoom-container.
          Set its value to be the name of the zoom-preview widget (which
          should be unique to the page).</li>
          
          <li> Add the 'mw_zoom_container' class to the zoom-container </li>
        </ul>
      </li>
      <li> Add the 'mw_zoom_image' class to the zoom image element (which
      should be a descendant of the zoom-container).
        <ul>
          You can also specify a modifier rule for the zoom-image:
          <li> Normally, when a thumbnail is clicked, its src
        attribute is copied to the zoom image -- but this usually
        results in an image thats much too small to zoom. </li>
          <li> Set the src-modifier-match attribute's value to be the
        match regex to be applied to the thumbnail image's src </li>
          <li> Set the src-modifier-replace attribute's value to be
        the replace string to be applied to the thumbnail image's src</li>
          <li> Look at this page's html for an example of this </li>
        </ul>
      </li>
     <li> Add the 'mw_zoom_button' class to the button element (which
      should be a descendant of the zoom-container). The 'loaded'
        class is added to this element once the image has loaded.
        <ul>
          (Optional - but highly recommended) : Add a modifier rule
        for the image displayed on the button. (Its good to modify the
        url so that a giant image isn't displayed in a tiny
        space. That results in slow re-paints which makes the UX
        janky). This modifier gets applied to the zoom-image url
        (after the zoom-image modifier gets applied):
          <li> Set the src-modifier-match attribute's value to be the
        match regex for the zoom-image src </li>
          <li> Set the src-modifier-replace attribute's value to be
        the replace string for the zoom-image src </li>
        </ul>
      </li>      
      <li> Add the 'mw_normal_image' class to the normal image. (The
        normal image should be a descendant of the zoom-container).
        <ul>
          Add a match/replace pair. These get applied to the normal
          image src to generate the initial zoom-image url:
          <li> Set the 'zoom-modifier-match' attribute. </li>
          <li> Set the 'zoom-modifier-replace' attribute </li>
        </ul>
      </li>
      <li> (Optional) Identify the zoom-thumbnails-container. This should contain
        the all of the thumbnail images. 
        <ul>
          <li>Add the 'mw-zoom-preview' attribute to the zoom-container.
          Set its value to match the name you specified for the zoom-container.</li>
          
          <li> Add the 'mw_zoom_thumbnails' class to the zoom-thumbnails-container </li>
        </ul>
      </li>
    </ol>

  
  
</div>

<h2> Test:</h2>
<div class='test' name='Simple'>

  <h3> Touch and Drag on the thumbnail to view the zoom preview </h3>
  
  <div mw-zoom-preview='ZoomPreview' class="mw_zoom_container">
    <img class="mw_zoom_image" src-modifier-match='(some_attr=)(.*)' src-modifier-replace='$1yesway' style="visibility: hidden" />
      
    <div class="normal_image">
      <img class='mw_normal_image'
      zoom-modifier-match='$' zoom-modifier-replace='?small_image=true' src="images/pic1.jpeg" />
    </div>

    <img src-modifier-match='$' src-modifier-replace='&button_image=true' class="mw_zoom_button"/>
        
  </div>
  
</div>


<div class='test' name='Thumbnails'>

  <h3> Touch and Drag on the thumbnail to view the zoom preview </h3>
  
  <div mw-zoom-preview='ZoomPreviewThumbnails' class="mw_zoom_container">
    <img class="mw_zoom_image" src-modifier-match='(some_attr=)(.*)' src-modifier-replace='$1yesway' style="visibility: hidden" />
      
    <div class="normal_image">
      <img id="big_image" class='mw_normal_image'
      zoom-modifier-match='$' zoom-modifier-replace='?small_image=true' src="images/pic1.jpeg" />
    </div>

    <img class="mw_zoom_button"/>
        
  </div>
  
  <ul mw-zoom-preview='ZoomPreviewThumbnails' class="mw_zoom_thumbnails">
    <li> <img width='30px' height='30px' src='images/pic1.jpeg?some_attr=noway'/> </li>
    <li> <img width='30px' height='30px' src='images/pic2.jpeg?some_attr=noway'/> </li>
    <li> <img width='30px' height='30px' src='images/pic3.jpeg?some_attr=noway'/> </li>
    <li> <img width='30px' height='30px' src='images/pic4.jpeg?some_attr=noway'/> </li>
  </ul>
  
</div>

<script type='text/javascript'>
  var big_image = document.getElementById("big_image");
  x$().iterate(
    document.querySelectorAll(".mw_zoom_thumbnails img"),
    function(elem) {
      elem.addEventListener('click', function(evt){big_image.src=evt.target.src;}, false);
    }
  );
</script>

<hr>
<address></address>
<!-- hhmts start --> Last modified: Fri May  6 15:06:13 PDT 2011 <!-- hhmts end -->
</body> </html>
