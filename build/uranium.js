(function(){function f(h,a){var c;if(typeof h==o){var k=h,l=a.firstChild===null?{UL:"LI",DL:"DT",TR:"TD"}[a.tagName]||a.tagName:a.firstChild.tagName;c={};var b=/^<([A-Z][A-Z0-9]*)([^>]*)>([\s\S]*)<\/\1>/i,e,d;d=0;var f;if(b.test(k)){b=b.exec(k);l=b[1];if(b[2]!=="")for(k=b[2].split(/([A-Z]*\s*=\s*['|"][A-Z0-9:;#\s]*['|"])/i);d<k.length;d++)f=k[d].replace(/^\s*|\s*$/g,""),f!==""&&f!==" "&&(f=f.split("="),c[f[0]]=f[1].replace(/(["']?)/g,""));k=b[3]}l=j.createElement(l);for(e in c)d=j.createAttribute(e),
d.nodeValue=c[e],l.setAttributeNode(d);l.innerHTML=k;c=l}else c=h;return c}function i(h){var a=/\S/;h.each(function(h){for(var b=h.firstChild,l=-1,e;b;)e=b.nextSibling,b.nodeType==3&&!a.test(b.nodeValue)?h.removeChild(b):b.nodeIndex=++l,b=e})}function a(h){if(h._xuiEventID)return h._xuiEventID;return h._xuiEventID=++a.id}function b(h,a){var c=n[h]=n[h]||{};return c[a]=c[a]||[]}function d(h,q,c){var k=a(h),q=b(k,q),k=function(a){c.call(h,a)===!1&&(a.preventDefault(),a.stopPropagation())};k.guid=c.guid=
c.guid||++a.id;k.handler=c;q.push(k);return k}var e,g=this,o=new String("string"),j=g.document,r=/^#?([\w-]+)$/,w=/^#/,x=/<([\w:]+)/,m=function(h){return[].slice.call(h,0)};try{m(j.documentElement.childNodes)}catch(y){m=function(h){for(var a=[],c=0;h[c];c++)a.push(h[c]);return a}}g.x$=g.xui=e=function(h,a){return new e.fn.find(h,a)};if(![].forEach)Array.prototype.forEach=function(h,a){var c=this.length||0,b=0;if(typeof h=="function")for(;b<c;b++)h.call(a,this[b],b,this)};e.fn=e.prototype={extend:function(h){for(var a in h)e.fn[a]=
h[a]},find:function(a,b){var c=[],k;if(a)if(b==void 0&&this.length)c=this.each(function(b){c=c.concat(m(e(a,b)))}).reduce(c);else if(b=b||j,typeof a==o)r.test(a)&&b.getElementById&&b.getElementsByTagName?(c=w.test(a)?[b.getElementById(a.substr(1))]:b.getElementsByTagName(a),c[0]==null&&(c=[])):x.test(a)?(k=j.createElement("i"),k.innerHTML=a,m(k.childNodes).forEach(function(a){c.push(a)})):c=g.Sizzle!==void 0?Sizzle(a,b):b.querySelectorAll(a),c=m(c);else if(a instanceof Array)c=a;else if(a.toString()==
"[object NodeList]")c=m(a);else{if(a.nodeName||a===g)c=[a]}else return this;return this.set(c)},set:function(a){var b=e();b.cache=m(this.length?this:[]);b.length=0;[].push.apply(b,a);return b},reduce:function(a,b){var c=[],a=a||m(this);a.forEach(function(a){c.indexOf(a,0,b)<0&&c.push(a)});return c},has:function(a){var b=e(a);return this.filter(function(){var a=this,h=null;b.each(function(b){h=h||b==a});return h})},filter:function(a){var b=[];return this.each(function(c,e){a.call(c,e)&&b.push(c)}).set(b)},
not:function(a){var b=m(this);return this.filter(function(c){var d;e(a).each(function(a){return d=b[c]!=a});return d})},each:function(a){for(var b=0,c=this.length;b<c;++b)if(a.call(this[b],this[b],b,this)===!1)break;return this}};e.fn.find.prototype=e.fn;e.extend=e.fn.extend;e.extend({html:function(a,b){i(this);if(arguments.length==0)return this[0].innerHTML;arguments.length==1&&arguments[0]!="remove"&&(b=a,a="inner");if(a!="remove"&&b&&b.each!==void 0){if(a=="inner"){var c=j.createElement("p");b.each(function(a){c.appendChild(a)});
this.each(function(a){a.innerHTML=c.innerHTML})}else{var e=this;b.each(function(b){e.html(a,b)})}return this}return this.each(function(c){var e,d=0;if(a=="inner")if(typeof b==o||typeof b=="number"){c.innerHTML=b;c=c.getElementsByTagName("SCRIPT");for(e=c.length;d<e;d++)eval(c[d].text)}else c.innerHTML="",c.appendChild(b);else a=="outer"?c.parentNode.replaceChild(f(b,c),c):a=="top"?c.insertBefore(f(b,c),c.firstChild):a=="bottom"?c.insertBefore(f(b,c),null):a=="remove"?c.parentNode.removeChild(c):a==
"before"?c.parentNode.insertBefore(f(b,c.parentNode),c):a=="after"&&c.parentNode.insertBefore(f(b,c.parentNode),c.nextSibling)})},attr:function(a,b){if(arguments.length==2)return this.each(function(c){a=="checked"&&(b==""||b==!1||typeof b=="undefined")?c.removeAttribute(a):c.setAttribute(a,b)});else{var c=[];this.each(function(b){b=b.getAttribute(a);b!=null&&c.push(b)});return c}}});"inner outer top bottom remove before after".split(" ").forEach(function(a){e.fn[a]=function(a){return function(b){return this.html(a,
b)}}(a)});e.events={};var n={};e.extend({on:function(h,f,c){return this.each(function(k){if(e.events[h]){var l=a(k),l=b(l,h);c=c||{};c.handler=function(a,b){e.fn.fire.call(e(this),h,b)};l.length||e.events[h].call(k,c)}k.addEventListener(h,d(k,h,f),!1)})},un:function(h,e){return this.each(function(c){for(var d=a(c),f=b(d,h),i=f.length;i--;)if(e===void 0||e.guid===f[i].guid){c.removeEventListener(h,f[i],!1);var g=n[d][h],j=i,p=g.slice(2);g.length=j<0?g.length+j:j;g.push.apply(g,p)}n[d][h].length===
0&&delete n[d][h];for(var z in n[d])return;delete n[d]})},fire:function(a,b){return this.each(function(c){if(c==j&&!c.dispatchEvent)c=j.documentElement;var e=j.createEvent("HTMLEvents");e.initEvent(a,!0,!0);e.data=b||{};e.eventName=a;c.dispatchEvent(e)})}});"click load submit touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend orientationchange".split(" ").forEach(function(a){e.fn[a]=function(a){return function(b){return b?this.on(a,b):this.fire(a)}}(a)});e(g).on("load",
function(){"onorientationchange"in j.body||function(a,b){e(g).on("resize",function(){var c=g.innerWidth<a&&g.innerHeight>b&&g.innerWidth<g.innerHeight,d=g.innerWidth>a&&g.innerHeight<b&&g.innerWidth>g.innerHeight;if(c||d)g.orientation=c?0:90,e("body").fire("orientationchange"),a=g.innerWidth,b=g.innerHeight})}(g.innerWidth,g.innerHeight)});var s;try{s=!!j.createEvent("TouchEvent").initTouchEvent}catch(A){s=!1}e.touch=s;a.id=1;e.extend({tween:function(a,b){a instanceof Array&&a.forEach(function(){});
var c=function(){var b={};"duration after easing".split(" ").forEach(function(c){a[c]&&(b[c]=a[c],delete a[c])});return b}(a),e=function(a){var b=[],c;if(typeof a!=o){for(c in a)b.push(c+":"+a[c]);b=b.join(";")}else b=a;return b}(a);return this.each(function(a){emile(a,e,c,b)})}});var u=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;e.extend({setStyle:function(a,b){a=a.replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()});return this.each(function(c){c.style[a]=b})},getStyle:function(a,b){var c=function(a,b){return j.defaultView.getComputedStyle(a,
"").getPropertyValue(b.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}))};if(b===void 0){var e=[];this.each(function(b){e.push(c(b,a))});return e}else this.each(function(e){b(c(e,a))})},addClass:function(a){return this.each(function(b){if(t(a).test(b.className)===!1)b.className=(b.className+" "+a||"").replace(u,"")})},hasClass:function(a,b){var c=this;return this.length&&function(){var e=!1;c.each(function(c){t(a).test(c.className)&&(e=!0,b&&b(c))});return e}()},removeClass:function(a){if(a===
void 0)this.each(function(a){a.className=""});else{var b=t(a);this.each(function(a){var e;e=(a.className.replace(b,"$1")||"").replace(u,"");a.className=e})}return this},css:function(a){for(var b in a)this.setStyle(b,a[b]);return this}});var v={},t=function(a){var b=v[a];b||(b=RegExp("(^|\\s+)"+a+"(?:\\s+|$)"),v[a]=b);return b};e.extend({xhr:function(a,b,c){function e(){g.readyState==4&&(delete f.xmlHttpRequest,(g.status===0||g.status==200)&&g.handleResp(),/^[45]/.test(g.status)&&g.handleError())}
/^(inner|outer|top|bottom|before|after)$/.test(a)||(c=b,b=a,a="inner");var d=c?c:{};if(typeof c=="function")d={},d.callback=c;var f=this,g=new XMLHttpRequest,c=d.method||"get",i=d.async||!1,p=d.data||null,j=0;g.queryString=p;g.open(c,b,i);if(d.headers)for(;j<d.headers.length;j++)g.setRequestHeader(d.headers[j].name,d.headers[j].value);g.handleResp=d.callback!=null?d.callback:function(){f.html(a,this.responseText)};g.handleError=d.error&&typeof d.error=="function"?d.error:function(){};if(i)g.onreadystatechange=
e,this.xmlHttpRequest=g;g.send(p);i||e();return this}});(function(a,b){function c(a,b,c){return(a+(b-a)*c).toFixed(3)}function e(a,b,c){for(var d=2,f,g,h=[],i=[];f=3,g=arguments[d-1],d--;)if(g.substr(0,1)=="r")for(g=g.match(/\d+/g);f--;)h.push(~~g[f]);else for(g.length==4&&(g="#"+g.substr(1,1)+g.substr(1,1)+g.substr(2,1)+g.substr(2,1)+g.substr(3,1)+g.substr(3,1));f--;)h.push(parseInt(g.substr(1+f*2,2),16));for(;f--;)d=~~(h[f+3]+(h[f]-h[f+3])*c),i.push(d<0?0:d>255?255:d);return"rgb("+i.join(",")+")"}
function d(a){var b=parseFloat(a),a=a.replace(/^[\-\d\.]+/,"");return isNaN(b)?{v:a,f:e,u:""}:{v:b,f:c,u:a}}function f(a){var b={},c=i.length,e;g.innerHTML='<div style="'+a+'"></div>';for(a=g.childNodes[0].style;c--;)if(e=a[i[c]])b[i[c]]=d(e);return b}var g=j.createElement("div"),i="backgroundColor borderBottomColor borderBottomWidth borderLeftColor borderLeftWidth borderRightColor borderRightWidth borderSpacing borderTopColor borderTopWidth bottom color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" ");
b[a]=function(a,b,c,e){var a=typeof a=="string"?j.getElementById(a):a,c=c||{},g=f(b),b=a.currentStyle?a.currentStyle:getComputedStyle(a,null),h,i={},k=+new Date,m=c.duration||200,o=k+m,n,r=c.easing||function(a){return-Math.cos(a*Math.PI)/2+0.5};for(h in g)i[h]=d(b[h]);n=setInterval(function(){var b=+new Date,d=b>o?1:(b-k)/m;for(h in g)a.style[h]=g[h].f(i[h].v,g[h].v,r(d))+g[h].u;b>o&&(clearInterval(n),c.after&&c.after(),e&&setTimeout(e,1))},10)}})("emile",this)})();var mixins={iterate:function(f,i){if(f!==void 0){var a=f.length||0,b=0;if(typeof i=="function")for(;b<a;b++)i.call(i,f[b],b,f)}},offset:function(f){typeof(f=="undefined")&&(f=this[0]);for(cumulative_left=cumulative_top=0;f.offsetParent;)cumulative_top+=f.offsetTop,cumulative_left+=f.offsetLeft,f=f.offsetParent;return{left:cumulative_left,top:cumulative_top}},find_next_ancestor:function(f,i){console.log("parent?",f.parentNode);return f.parentNode!=window.document?x$().find_set_ancestor(f.parentNode,
i):null},find_set_ancestor:function(f,i){console.log("data-ur-set:");console.log(f);console.log(x$(f).attr("data-ur-set"));var a=x$(f).attr("data-ur-set")[0];return a!==void 0?i==void 0?f:a==i?f:x$().find_next_ancestor(f,i):x$().find_next_ancestor(f,i)},get_unique_uranium_id:function(){var f=0;return function(){f+=1;return f}}(),find_elements:function(f,i){var a={};x$("*[data-ur-"+f+"-component]").each(function(){var b=!0,d=x$(this).attr("data-ur-id");if(d.length!=0)a[d]===void 0&&(a[d]={});else{var e=
x$().find_set_ancestor(this);e!==null?x$(e).attr("data-ur-id").length==0?(d=x$().get_unique_uranium_id(),x$(e).attr("data-ur-id",d),a[d]={}):d=x$(e).attr("data-ur-id")[0]:(console.log("Uranium Error: Couldn't find associated ur-set for component:",this),b=!1)}e=x$(this).attr("data-ur-"+f+"-component");e===void 0&&(b=!1);if(b)if(i!==void 0&&i[e]!==void 0)i[e](a[d],this,e);else a[d][e]=this});return a}};xui.extend(mixins);(function(){function f(a,b){a.content===void 0&&(a.content=[]);a.content.push(b)}function i(){this.component_constructors={content:f}}i.prototype.find=function(){var a=x$().find_elements("toggler",this.component_constructors);for(toggler_id in a){var b=a[toggler_id];if(b.button===void 0)console.log("Uranium Declaration Error: No button found for toggler with id="+toggler_id);else{var d=x$(b.button).attr("data-ur-state")[0];d===void 0&&x$(b.button).attr("data-ur-state","disabled");b.content===void 0?
console.log("Uranium Declaration Error: No content found for toggler with id="+toggler_id):x$().iterate(b.content,function(a){x$(a).attr("data-ur-state")[0]===void 0&&x$(a).attr("data-ur-state",d)})}}return a};i.prototype.construct_button_callback=function(a){return function(b){var b=b.currentTarget,d=x$(b).attr("data-ur-state")[0]==="enabled"?"disabled":"enabled";x$(b).attr("data-ur-state",d);x$().iterate(a,function(a){var b=x$(a).attr("data-ur-state")[0]==="enabled"?"disabled":"enabled";x$(a).attr("data-ur-state",
b)})}};i.prototype.initialize=function(){var a=this.find();this.togglers=a;for(name in a){var b=a[name];x$(b.button).click(this.construct_button_callback(b.content))}};window.TL=new i;window.addEventListener("load",function(){TL.initialize()},!1)})();(function(){function f(a,b){this.select=a;this.list=b;this.initialize()}function i(){this.SelectLists={}}f.prototype.initialize=function(){x$(this.list).click(function(a){return function(b){a.trigger_option(b)}}(this))};f.prototype.trigger_option=function(a){var b=a.target,d="";x$().iterate(this.list.children,function(a){a==b?(x$(a).attr("data-ur-state","enabled"),d=x$(a).attr("value")):x$(a).attr("data-ur-state","disabled")});this.select.value=d;return!0};i.prototype.initialize=function(){var a=
x$().find_elements("select-list");for(name in a)this.SelectLists[name]=new f(a[name].select,a[name].content)};SLL=new i;window.addEventListener("load",function(){SLL.initialize()},!1)})();(function(){function f(a){this.select=a.select;this.increment=a.increment;this.decrement=a.decrement;this.initialize()}function i(){}f.prototype.initialize=function(){x$(this.increment).click(function(a){return function(b){a.trigger_option(b,1)}}(this));x$(this.decrement).click(function(a){return function(b){a.trigger_option(b,-1)}}(this))};f.prototype.trigger_option=function(a,b){if(x$(a.currentTarget).attr("data-ur-state")[0]==="disabled")return!1;var d={},e=this.select.value,f={prev:null,next:null};
x$().iterate(this.select.children,function(a,b){x$(a).attr("value")[0]==e&&(d={element:a,index:b});typeof d.index=="undefined"&&(f.prev=x$(a).attr("value")[0]);b==d.index+1&&(f.next=x$(a).attr("value")[0])});var i=this.select.children.length,j=d.index+b;j==0?x$(this.decrement).attr("data-ur-state","disabled"):x$(this.decrement).attr("data-ur-state","enabled");j==i-1?x$(this.increment).attr("data-ur-state","disabled"):x$(this.increment).attr("data-ur-state","enabled");if(j<0||j==i)return!1;this.select.value=
f[b==1?"next":"prev"];return!0};i.prototype.initialize=function(){var a=x$().find_elements("select-buttons");this.SelectButtons={};for(name in a)new f(a[name])};SBL=new i;window.addEventListener("load",function(){SBL.initialize()},!1)})();(function(){function f(a){this.elements=a.elements;this.modifier={};if(a.modifier!==null)this.modifier=a.modifier;this.dimensions={};this.zoom=!1;this.update();this.events={start:"touchstart",move:"touchmove",end:"touchend"};this.touch=xui.touch;if(!this.touch)this.events={move:"mousemove",end:"mouseout"};this.initialize();console.log("Zoom Preview Loaded")}function i(){}f.prototype.rewrite_images=function(a,b,d){if(typeof a=="undefined")return!1;if(b===void 0&&d===void 0)b=this.modifier.zoom_image.match,
d=this.modifier.zoom_image.replace;this.elements.zoom_image.src=a.replace(b,d);b=d=null;if(this.modifier.button)b=this.modifier.button.match,d=this.modifier.button.replace;this.elements.button.src=b&&d?this.elements.zoom_image.src.replace(b,d):this.elements.zoom_image.src;var e=this;this.elements.zoom_image.style.visibility="hidden";x$(this.elements.zoom_image).on("load",function(){e.update()});x$(this.elements.button).on("load",function(){x$(e.elements.button).addClass("loaded")})};f.prototype.update=
function(){var a=this;x$().iterate(["button","zoom_image","container"],function(b){a.dimensions[b]=[a.elements[b].offsetWidth,a.elements[b].offsetHeight]});var b=x$(this.elements.button).offset(),b=[b.left,b.top];this.button_center=[this.dimensions.button[0]/2+b[0],this.dimensions.button[1]/2+b[1]];this.image_origin=[-0.5*this.dimensions.zoom_image[0],-0.5*this.dimensions.zoom_image[1]]};f.prototype.get_event_coordinates=function(a){if(this.touch){if(a.touches.length==1)return[a.touches[0].pageX,
a.touches[0].pageY]}else return[a.pageX,a.pageY]};f.prototype.initialize=function(){x$(this.elements.button).on(this.events.move,function(a){return function(b){a.scroll_zoom(b)}}(this));x$(this.elements.button).on(this.events.end,function(a){return function(b){a.scroll_end(b)}}(this));if(this.events.start)x$(this.elements.button).on("touchstart",function(){return function(a){a.preventDefault()}}(this));x$(this.elements.thumbnails).click(function(a){return function(b){if(b.target.tagName!="IMG")return!1;
a.rewrite_images(b.target.src)}}(this));this.normal_image_changed()};f.prototype.normal_image_changed=function(){img=x$(this.elements.normal_image);this.rewrite_images(img.attr("src")[0],this.modifier.normal_image.match,this.modifier.normal_image.replace)};f.prototype.scroll_end=function(){this.elements.zoom_image.style.visibility="hidden"};f.prototype.scroll_zoom=function(a){this.elements.zoom_image.style.visibility="visible";a=this.get_event_coordinates(a);if(a===null)return!1;a=[(a[0]-this.button_center[0])/
this.dimensions.button[0],(a[1]-this.button_center[1])/this.dimensions.button[1]];a=[this.dimensions.zoom_image[0]*a[0],this.dimensions.zoom_image[1]*a[1]];a=[this.image_origin[0]-a[0],this.image_origin[1]-a[1]];a=this.check_bounds(a);this.elements.zoom_image.style.webkitTransform="translate3d("+a[0]+"px,"+a[1]+"px,0px)"};f.prototype.check_bounds=function(a){var b=[this.dimensions.container[0]-this.dimensions.zoom_image[0],this.dimensions.container[1]-this.dimensions.zoom_image[1]];x$().iterate([0,
1],function(d){a[d]>=0&&(a[d]=0);a[d]<=b[d]&&(a[d]=b[d])});return a};ComponentConstructors={_modifiers:function(a,b,d,e){a.modifier===void 0&&(a.modifier={});var f=e===void 0?"src":"zoom";console.log("searching for modifier:",f,b);e=x$(b).attr("data-ur-"+f+"-modifier-match")[0];b=x$(b).attr("data-ur-"+f+"-modifier-replace")[0];typeof e!="undefined"&&typeof b!="undefined"&&(console.log("found modifiers:",e,b),a.modifier[d]={match:RegExp(e),replace:b})},_construct:function(a,b,d,e){a.elements===void 0&&
(a.elements={});a.elements[d]=b;this._modifiers(a,b,d,e)},normal_image:function(a,b,d){this._construct(a,b,d,"zoom")},zoom_image:function(a,b,d){this._construct(a,b,d)},button:function(a,b,d){this._construct(a,b,d)},container:function(a,b,d){this._construct(a,b,d)},thumbnails:function(a,b,d){this._construct(a,b,d)}};typeof Uranium==="undefined"&&(Uranium={widgets:{}});i.prototype.initialize=function(){this.zoom_previews=x$().find_elements("zoom-preview",ComponentConstructors);for(name in this.zoom_previews)Uranium.widgets["zoom-preview"]=
{},Uranium.widgets["zoom-preview"][name]=new f(this.zoom_previews[name])};ZPL=new i;window.addEventListener("load",function(){ZPL.initialize()},!1)})();(function(){})();
